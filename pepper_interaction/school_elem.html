<!DOCTYPE html>
<html>
<head>
  <!-- titolo della tab sul browser-->
  <title>Elementary school play</title> 
  <style>
    body{
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .image-container {
      display: flex;
      justify-content: center;
    }

    .image {
      margin: 10px;
    }
    #rifiuto{
      cursor: move;
    }
  </style>
</head>
<body>
  <h1>Choose the right trash</h1>
  <div class="image-container">
    <img id="rifiuto" class="image" src="/home/ale/playground/newdemo/img/trash/cartone.jpeg" alt="rifiuto">
  </div>
  <div class="image-container">  
    <img id="secchio1" class="image" src="/home/ale/playground/newdemo/img/trash/secchio_blu.png" alt="secchio plastica">
    <img id="secchio2" class="image" src="/home/ale/playground/newdemo/img/trash/secchio_verde.png" alt="secchio umido">
    <img id="secchio3" class="image" src="/home/ale/playground/newdemo/img/trash/secchio_giallo.png" alt="secchio carta">
    <img id="secchio4" class="image" src="/home/ale/playground/newdemo/img/trash/secchio_rosso.png" alt="secchio indifferenziata">
  </div>

  <script>
    window.addEventListener('DOMContentLoaded', (event) => {
      const rifiuto = document.getElementById('rifiuto');
      const secchio1 = document.getElementById('secchio1');
      const secchio2 = document.getElementById('secchio2');
      const secchio3 = document.getElementById('secchio3');
      const secchio4 = document.getElementById('secchio4');

      let isDragging = false;
      let offsetX = 0;
      let offsetY = 0;

      rifiuto.addEventListener('mousedown', (event) => {
        isDragging = true;
        offsetX = event.clientX - rifiuto.offsetLeft;
        offsetY = event.clientY - rifiuto.offsetTop;
      });
      
      document.addEventListener('mousemove', (event) => {
        if (isDragging) {
          /*rifiuto.style.left = event.clientX - rifiuto.offsetWidth / 2 + 'px';
          rifiuto.style.top = event.clientY - rifiuto.offsetHeight / 2 + 'px';
          */
          const x = event.clientX - offsetX;
          const y = event.clientY - offsetY;
          rifiuto.style.left = x + 'px';
          rifiuto.style.top = y + 'px';

        }
      });

      document.addEventListener('mouseup', (event) => {
        isDragging = false;
        
        const rifiuto_rect = rifiuto.getBoundingClientRect();
        const sec_1_rect = secchio1.getBoundingClientRect();
        const sec_2_rect = secchio2.getBoundingClientRect();
        const sec_3_rect = secchio3.getBoundingClientRect();
        const sec_4_rect = secchio4.getBoundingClientRect();

        if (
          isOverlapping(mainImageRect, imageRect1) ||
          isOverlapping(mainImageRect, imageRect2) ||
          isOverlapping(mainImageRect, imageRect3) ||
          isOverlapping(mainImageRect, imageRect4)
        ) {
          // Immagine principale sovrapposta a una delle altre immagini
          // Puoi eseguire qui le azioni desiderate
          console.log('Immagine principale sovrapposta a un\'altra immagine.');
        }
      });
      function isOverlapping(rect1, rect2) {
        return (
          rect1.left < rect2.right &&
          rect1.right > rect2.left &&
          rect1.top < rect2.bottom &&
          rect1.bottom > rect2.top
        );
      }
    });
  </script>
</body>
</html>
